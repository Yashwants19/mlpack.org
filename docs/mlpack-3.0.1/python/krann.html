<html >
<head >

<meta name="keywords" content="mlpack, libmlpack, c++, armadillo, machine learning, data mining, classification, regression, tree-based methods, dual-tree algorithm">
<meta name="description" content="mlpack: a fast, flexible c++ machine learning library">
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<title >mlpack: a fast, flexible c++ machine learning library</title>
</head><link rel="stylesheet" href="../../../style.css" /></link><link rel="stylesheet" href="../../style-python.css" /></link><link href="http://fonts.googleapis.com/css?family=Maven+Pro:500" rel="stylesheet" type="text/css" /></link>



<body ><br /></br>


<div class="titlebar">
   <a href="http://www.mlpack.org"><img src="../../../mlpack.png"></a>
</div>
<center >
<div class="mlnavbar">
  <div class="navcontainer">
   <div class="mlnavitem" name="mlnavmain"><a href="../../../index.html">main</a></div>
   <div class="mlnavitem" name="mlnavabout"><a href="../../../about.html">about</a></div>
   <div class="mlnavitem" name="mlnavdoc"><a href="../../../docs.html">docs</a></div>
   <div class="mlnavitem" name="mlnavhelp"><a href="../../../help.html">get help</a></div>
   <div class="mlnavitem" name="mlnavbugs"><a href="https://github.com/mlpack/mlpack">github</a></div>
  </div>
</div>
</center>
<div class="separator"></div>
<center >
<div class="mainsection smallertext pythonpage">
<h1><center>mlpack.krann</center></h1>
<font class="titlecode">krann(...)</font><br />
<font class="titlebold">K-Rank-Approximate-Nearest-Neighbors (kRANN)</font>
<p class="importcode">&gt;&gt;&gt; from mlpack import krann</p><p>This program will calculate the k rank-approximate-nearest-neighbors of a set of points. You may specify a separate set of reference points and query points, or just a reference set which will be used as both the reference and query set. You must specify the rank approximation (in %) (and optionally the success probability).</p>
</p>
<p>For example, the following will return 5 neighbors from the top 0.1% of the data (with probability 0.95) for each point in <font class="code">'input.csv'</font> and store the distances in <font class="code">'distances.csv'</font> and the neighbors in the file <font class="code">'neighbors.csv'</font>:</p>
</p>
<p>$ allkrann -k 5 -r input.csv -d distances.csv -n neighbors.csv --tau 0.1</p>
</p>
<p>Note that tau must be set such that the number of points in the corresponding percentile of the data is greater than k.  Thus, if we choose tau = 0.1 with a dataset of 1000 points and k = 5, then we are attempting to choose 5 nearest neighbors out of the closest 1 point -- this is invalid and the program will terminate with an error message.</p>
</p>
<p>The output files are organized such that row i and column j in the neighbors output file corresponds to the index of the point in the reference set which is the i'</font>th nearest neighbor from the point in the query set with index j.  Row i and column j in the distances output file corresponds to the distance between those two points.</p><h2>input options</h2>
<ul>
<li><font class="code">alpha</font> <font class="codetype">(float)</font>: The desired success probability.  Default value 0.95.</li><li><font class="code">copy_all_inputs</font> <font class="codetype">(bool)</font>: If specified, all input parameters will be deep copied before the method is run.  This is useful for debugging problems where the input parameters are being modified by the algorithm, but can slow down the code.</li><li><font class="code">first_leaf_exact</font> <font class="codetype">(bool)</font>: The flag to trigger sampling only after exactly exploring the first leaf.</li><li><font class="code">input_model</font> <font class="codetype">(mlpack.RANNModelType)</font>: Pre-trained kNN model.</li><li><font class="code">k</font> <font class="codetype">(int)</font>: Number of nearest neighbors to find.  Default value 0.</li><li><font class="code">leaf_size</font> <font class="codetype">(int)</font>: Leaf size for tree building (used for kd-trees, UB trees, R trees, R* trees, X trees, Hilbert R trees, R+ trees, R++ trees, and octrees).  Default value 20.</li><li><font class="code">naive</font> <font class="codetype">(bool)</font>: If true, sampling will be done without using a tree.</li><li><font class="code">query</font> <font class="codetype">(numpy matrix or arraylike, float dtype)</font>: Matrix containing query points (optional).</li><li><font class="code">random_basis</font> <font class="codetype">(bool)</font>: Before tree-building, project the data onto a random orthogonal basis.</li><li><font class="code">reference</font> <font class="codetype">(numpy matrix or arraylike, float dtype)</font>: Matrix containing the reference dataset.</li><li><font class="code">sample_at_leaves</font> <font class="codetype">(bool)</font>: The flag to trigger sampling at leaves.</li><li><font class="code">seed</font> <font class="codetype">(int)</font>: Random seed (if 0, std::time(NULL) is used).  Default value 0.</li><li><font class="code">single_mode</font> <font class="codetype">(bool)</font>: If true, single-tree search is used (as opposed to dual-tree search.</li><li><font class="code">single_sample_limit</font> <font class="codetype">(int)</font>: The limit on the maximum number of samples (and hence the largest node you can approximate).  Default value 20.</li><li><font class="code">tau</font> <font class="codetype">(float)</font>: The allowed rank-error in terms of the percentile of the data.  Default value 5.</li><li><font class="code">tree_type</font> <font class="codetype">(string)</font>: Type of tree to use: 'kd', 'ub', 'cover', 'r', 'x', 'r-star', 'hilbert-r', 'r-plus', 'r-plus-plus', 'oct'.  Default value kd.</li><li><font class="code">verbose</font> <font class="codetype">(bool)</font>: Display informational messages and the full list of parameters and timers at the end of execution.</li></ul>
<h2>output options</h2>
<p>The return value from the binding is a dict containing the following elements:</p>
<ul><li><font class="code">distances</font> <font class="codetype">(numpy matrix, float dtype)</font>: Matrix to output distances into.</li><li><font class="code">neighbors</font> <font class="codetype">(numpy matrix, int dtype)</font>: Matrix to output neighbors into.</li><li><font class="code">output_model</font> <font class="codetype">(mlpack.RANNModelType)</font>: If specified, the kNN model will be output here.</li><ul>
</ul>
</div>
</body>
</html>
