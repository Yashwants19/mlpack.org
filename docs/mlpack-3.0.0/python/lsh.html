<html >
<head >

<meta name="keywords" content="mlpack, libmlpack, c++, armadillo, machine learning, data mining, classification, regression, tree-based methods, dual-tree algorithm">
<meta name="description" content="mlpack: a scalable c++ machine learning library">
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<title >mlpack: a scalable c++ machine learning library</title>
</head><link rel="stylesheet" href="../../../style.css" /></link><link rel="stylesheet" href="../../style-python.css" /></link><link href="http://fonts.googleapis.com/css?family=Maven+Pro:500" rel="stylesheet" type="text/css" /></link>



<body ><br /></br>


<div class="titlebar">
   <a href="http://www.mlpack.org"><img src="../../../mlpack.png"></a>
</div>
<center >
<div class="mlnavbar">
  <div class="navcontainer">
   <div class="mlnavitem" name="mlnavmain"><a href="../../../index.html">main</a></div>
   <div class="mlnavitem" name="mlnavabout"><a href="../../../about.html">about</a></div>
   <div class="mlnavitem" name="mlnavdoc"><a href="../../../docs.html">docs</a></div>
   <div class="mlnavitem" name="mlnavhelp"><a href="../../../help.html">get help</a></div>
   <div class="mlnavitem" name="mlnavbugs"><a href="https://github.com/mlpack/mlpack">github</a></div>
  </div>
</div>
</center>
<div class="separator"></div>
<center >
<div class="mainsection smallertext pythonpage">
<h1><center>mlpack.lsh</center></h1>
<font class="titlecode">lsh(...)</font><br />
<font class="titlebold">K-Approximate-Nearest-Neighbor Search with LSH</font>
<p class="importcode">&gt;&gt;&gt; from mlpack import lsh</p><p>This program will calculate the k approximate-nearest-neighbors of a set of points using locality-sensitive hashing. You may specify a separate set of reference points and query points, or just a reference set which will be used as both the reference and query set. </p>
</p>
<p>For example, the following will return 5 neighbors from the data for each point in <font class="code">'input'</font> and store the distances in <font class="code">'distances'</font> and the neighbors in <font class="code">'neighbors'</font>:</p>
</p>
<p class="codeblock"><font class="code">&gt;&gt;&gt; lsh(k=5, reference=input)<br />
&gt;&gt;&gt; distances = output['distances']<br />
&gt;&gt;&gt; neighbors = output['neighbors']</font></p>
</p>
<p>The output is organized such that row i and column j in the neighbors output corresponds to the index of the point in the reference set which is the j'</font>th nearest neighbor from the point in the query set with index i.  Row j and column i in the distances output file corresponds to the distance between those two points.</p>
</p>
<p>Because this is approximate-nearest-neighbors search, results may be different from run to run.  Thus, the <font class="code">'seed'</font> parameter can be specified to set the random seed.</p>
</p>
<p>This program also has many other parameters to control its functionality; see the parameter-specific documentation for more information.</p><h2>input options</h2>
<ul>
<li><font class="code">bucket_size</font> <font class="codetype">(int)</font>: The size of a bucket in the second level hash.  Default value 500.</li><li><font class="code">copy_all_inputs</font> <font class="codetype">(bool)</font>: If specified, all input parameters will be deep copied before the method is run.  This is useful for debugging problems where the input parameters are being modified by the algorithm, but can slow down the code.</li><li><font class="code">hash_width</font> <font class="codetype">(float)</font>: The hash width for the first-level hashing in the LSH preprocessing. By default, the LSH class automatically estimates a hash width for its use.  Default value 0.</li><li><font class="code">input_model</font> <font class="codetype">(mlpack.LSHSearchType)</font>: Input LSH model.</li><li><font class="code">k</font> <font class="codetype">(int)</font>: Number of nearest neighbors to find.  Default value 0.</li><li><font class="code">num_probes</font> <font class="codetype">(int)</font>: Number of additional probes for multiprobe LSH; if 0, traditional LSH is used.  Default value 0.</li><li><font class="code">projections</font> <font class="codetype">(int)</font>: The number of hash functions for each table  Default value 10.</li><li><font class="code">query</font> <font class="codetype">(numpy matrix or arraylike, float dtype)</font>: Matrix containing query points (optional).</li><li><font class="code">reference</font> <font class="codetype">(numpy matrix or arraylike, float dtype)</font>: Matrix containing the reference dataset.</li><li><font class="code">second_hash_size</font> <font class="codetype">(int)</font>: The size of the second level hash table.  Default value 99901.</li><li><font class="code">seed</font> <font class="codetype">(int)</font>: Random seed.  If 0, 'std::time(NULL)' is used.  Default value 0.</li><li><font class="code">tables</font> <font class="codetype">(int)</font>: The number of hash tables to be used.  Default value 30.</li><li><font class="code">true_neighbors</font> <font class="codetype">(numpy matrix or arraylike, int/long dtype)</font>: Matrix of true neighbors to compute recall with (the recall is printed when -v is specified).</li><li><font class="code">verbose</font> <font class="codetype">(bool)</font>: Display informational messages and the full list of parameters and timers at the end of execution.</li></ul>
<h2>output options</h2>
<p>The return value from the binding is a dict containing the following elements:</p>
<ul><li><font class="code">distances</font> <font class="codetype">(numpy matrix, float dtype)</font>: Matrix to output distances into.</li><li><font class="code">neighbors</font> <font class="codetype">(numpy matrix, int dtype)</font>: Matrix to output neighbors into.</li><li><font class="code">output_model</font> <font class="codetype">(mlpack.LSHSearchType)</font>: Output for trained LSH model.</li><ul>
</ul>
</div>
</body>
</html>
